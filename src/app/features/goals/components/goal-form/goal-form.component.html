<form class="goal-form" [formGroup]="form" (ngSubmit)="submit()">
  <h2>Create Goal</h2>

  <div class="field">
    <label>Title</label>
    <input formControlName="title" placeholder="e.g. Walk 8k steps" />
    <small *ngIf="form.controls.title.touched && form.controls.title.invalid">
      Title must be at least 3 characters
    </small>
  </div>

  <div class="field">
    <label>Description</label>
    <textarea
      formControlName="description"
      rows="3"
      placeholder="Optional description"
    ></textarea>
  </div>

  <div class="row">
    <div class="field">
      <label>Goal Type</label>
      <select formControlName="goalType">
        <option value="walking">Walking</option>
        <option value="water">Water</option>
        <option value="custom">Custom</option>
      </select>
    </div>

    <div class="field">
      <label>Metric</label>
      <select formControlName="metricType">
        <option value="duration">Duration</option>
        <option value="distance">Distance</option>
        <option value="volume">Volume</option>
        <option value="count">Count</option>
        <option value="binary">Yes / No</option>
      </select>
    </div>
  </div>

  <div class="row" *ngIf="!isBinary()">
    <div class="field">
      <label>Target</label>
      <input type="number" formControlName="targetValue" />
    </div>

    <div class="field">
      <label>Unit</label>
      <select formControlName="unit">
        <option *ngFor="let u of availableUnits()" [value]="u">
          {{ u }}
        </option>
      </select>
    </div>
  </div>

  <div class="field" formGroupName="schedule">
    <label>Frequency</label>
    <select formControlName="frequency">
      <option value="daily">Daily</option>
      <option value="weekly">Weekly</option>
    </select>

    <div class="weekdays" *ngIf="frequency() === 'weekly'">
      <button
        type="button"
        class="weekday"
        *ngFor="let d of days"
        (click)="toggleDay(d.value)"
        [class.weekday--selected]="isDaySelected(d.value)"
      >
        {{ d.label }}
      </button>
    </div>
  </div>

  <button class="submit" type="submit" [disabled]="form.invalid">
    Create Goal
  </button>
</form>
